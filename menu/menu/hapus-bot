#!/bin/bash

# ==========================================================
#  TOMATO LUXE THEME ENGINE - UNINSTALL BOT
# ==========================================================

# 1. Palette Definition (True Color)
C_TOMATO="\033[38;2;217;69;57m"   # Primary Red
C_BURGUNDY="\033[38;2;143;38;38m" # Border Red
C_SAGE="\033[38;2;148;180;159m"   # Success Green
C_GOLD="\033[38;2;230;203;165m"   # Warning/Highlight
C_CREAM="\033[38;2;253;251;247m"  # Text
C_RESET="\033[0m"

# 2. Icons
ICON_TOMATO="ğŸ…"
ICON_TRASH="ğŸ—‘ï¸"
ICON_STAR="âœ¨"
ICON_GEAR="âš™"
ICON_CHECK="âœ”"
ICON_CROSS="âœ–"

# ==========================================================
#  HELPER FUNCTIONS
# ==========================================================

draw_header() {
    clear
    echo -e "${C_BURGUNDY}â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—${C_RESET}"
    echo -e "${C_BURGUNDY}â•‘${C_RESET} ${C_SAGE}${ICON_TOMATO}    ${C_TOMATO}TOMATO MANAGER${C_RESET} ${C_GOLD}(REMOVE BOT PANEL)${C_RESET}           ${C_BURGUNDY}â•‘${C_RESET}"
    echo -e "${C_BURGUNDY}â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£${C_RESET}"
    echo -e "${C_BURGUNDY}â•‘${C_RESET} ${C_GOLD}${ICON_STAR} AUTHOR : ${C_CREAM}DUDUL (TEA V.1.0)${C_RESET}                   ${C_BURGUNDY}â•‘${C_RESET}"
    echo -e "${C_BURGUNDY}â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${C_RESET}"
    echo -e ""
}

print_status() {
    echo -e "  ${C_GOLD}${ICON_GEAR} $1...${C_RESET}"
    sleep 0.2
}

# ==========================================================
#  MAIN LOGIC
# ==========================================================

draw_header

echo -e "  ${C_GOLD}[?] Are you sure you want to remove Bot Panel? (y/n)${C_RESET}"
read -p "      > " confirm
if [[ "$confirm" != "y" && "$confirm" != "Y" ]]; then
    menu
    exit 0
fi

echo -e ""
echo -e "${C_BURGUNDY}  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€${C_RESET}"

# 1. Stop Services (Safety First)
print_status "Stopping Bot Services"
systemctl stop kyt > /dev/null 2>&1
systemctl stop bot > /dev/null 2>&1
systemctl disable kyt > /dev/null 2>&1
systemctl disable bot > /dev/null 2>&1

# 2. Define Files to Remove
# Menggunakan array agar lebih rapi dan mudah dimaintenance
files=(
    "/root/bot.sh"
    "/usr/bin/kyt"
    "/usr/bin/kyt.zip"
    "/usr/bin/bot"
    "/usr/bin/bot.zip"
    "/usr/bin/bot-backup"
    "/usr/bin/bot-cek-login-ssh"
    "/usr/bin/bot-cek-ss"
    "/usr/bin/bot-cek-tr"
    "/usr/bin/bot-cek-vless"
    "/usr/bin/bot-cek-ws"
    "/usr/bin/bot-member-ssh"
    "/usr/bin/setting.py"
    "/usr/bin/bot-restore"
    "/usr/bin/bot-vps-info"
)

# 3. Process Removal
count=0
for file in "${files[@]}"; do
    if [ -f "$file" ]; then
        rm -rf "$file"
        echo -e "  ${C_TOMATO}${ICON_TRASH} Removed:${C_RESET} ${C_CREAM}$(basename $file)${C_RESET}"
        ((count++))
        sleep 0.1
    fi
done

# Cleanup Python Cache if exists
rm -rf /usr/bin/__pycache__

echo -e "${C_BURGUNDY}  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€${C_RESET}"
echo -e ""

# 4. Final Output
echo -e "${C_BURGUNDY}â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—${C_RESET}"
echo -e "${C_BURGUNDY}â•‘${C_RESET} ${C_SAGE}${ICON_CHECK}       ${C_TOMATO}BOT PANEL REMOVED SUCCESSFULLY${C_RESET}       ${C_SAGE}${ICON_TRASH}${C_RESET}        ${C_BURGUNDY}â•‘${C_RESET}"
echo -e "${C_BURGUNDY}â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£${C_RESET}"
printf " ${C_BURGUNDY}â•‘${C_RESET} ${C_GOLD}%-12s${C_RESET} ${C_CREAM}: %-35s${C_RESET} ${C_BURGUNDY}â•‘${C_RESET}\n" "Total Files" "$count Files Deleted"
printf " ${C_BURGUNDY}â•‘${C_RESET} ${C_GOLD}%-12s${C_RESET} ${C_CREAM}: %-35s${C_RESET} ${C_BURGUNDY}â•‘${C_RESET}\n" "Service" "Stopped & Disabled"
printf " ${C_BURGUNDY}â•‘${C_RESET} ${C_GOLD}%-12s${C_RESET} ${C_CREAM}: %-35s${C_RESET} ${C_BURGUNDY}â•‘${C_RESET}\n" "Status" "Cleaned"
echo -e "${C_BURGUNDY}â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${C_RESET}"

echo -e ""
read -n 1 -s -r -p "Press any key to return..."
menu